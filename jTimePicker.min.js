/*
 * jTimePicker 1.0 plugin for jQuery
 * Original by: Dionlee Uy <dionleeuy@gmail.com>
*/
(function(a){var c=12,d=59,f=[48,49,50,51,52,53,54,55,56,57,96,97,98,99,100,101,102,103,104,105,40,39,38,37,17,16,9],g=function(i,j){var k=this;if(this.input=a(i),this.activeField=g.HOUR,this.picker=null,this.hour=a('<input class="tp_hr"    type="text" maxlength="2">'),this.min=a('<input class="tp_min"    type="text" maxlength="2">'),this.ampm=a('<input class="tp_am_pm" type="text" maxlength="2">'),j.time){var l=parseInt(j.time.substr(0,2)),n=parseInt(j.time.substr(3,2));this.ampm.val(12<parseInt(l)?'PM':'AM'),this.min.val(10<n?n:'0'+n),l=12<l?l-12:l,this.hour.val(10<l?l:'0'+l),this.setValue()}this.hour.on('focus',function(){a(this).select(),k.activeField=g.HOUR}).on('blur',function(){var p=parseInt(a(this).val());p>c&&a(this).val(c),10>p&&0<p&&a(this).val('0'+p),k.setValue()}).on('keydown',function(o){if(0>f.indexOf(o.keyCode))return!1}).on('keyup',function(o){40==o.keyCode?k.spinDown():38==o.keyCode&&k.spinUp()}),this.min.on('focus',function(){a(this).select(),k.activeField=g.MIN}).on('blur',function(){var p=parseInt(a(this).val());p>d&&a(this).val(d),10>p&&0<p&&a(this).val('0'+p),k.setValue()}).on('keydown',function(o){if(0>f.indexOf(o.keyCode))return!1}).on('keyup',function(o){40==o.keyCode?k.spinDown():38==o.keyCode&&k.spinUp()}),this.ampm.on('keydown',function(o){if(80==o.keyCode)a(this).val('PM').select(),k.setValue();else if(65==o.keyCode)a(this).val('AM').select(),k.setValue();else if(40==o.keyCode||38==o.keyCode)k.activeField=g.AMPM,k.adjustTime(null);else if(16==o.keyCode||9==o.keyCode)return!0;return!1}).on('focus',function(){a(this).select(),k.activeField=g.AMPM}),this.spinnerDiv=a('<div class="tp_spinners"></div>'),this.spinUpBtn=a('<span class="tp_spinup"></span>'),this.spinDownBtn=a('<span class="tp_spindown"></span>'),this.spinUpBtn.on('click',function(){k.spinUp()}),this.spinDownBtn.on('click',function(){k.spinDown()}),this.create()};g.prototype={constructor:g,create:function(){var i=this;try{var j=i.input.val().split(':');if('undefined'!=typeof j){var k=parseInt(j[0],10)||0,l=12<k?k-12:k;i.hour.val(10>l?0===l?'12':'0'+l:''+l),i.ampm.val(12<k?'PM':'AM');var n=parseInt(j[1],10)||0;i.min.val(10>n?'0'+n:''+n)}}catch(o){console.error(o.message),i.hour.val('12'),i.min.val('00'),i.ampm.val('AM')}i.input.wrap('<div class="tp"></div>'),i.input.hide(),i.picker=i.input.parent(),i.picker.append(i.hour).append('<span style="tp_colon">&#58;</span>').append(i.min).append('&nbsp;').append(i.ampm).append('&nbsp;'),i.spinnerDiv.append(i.spinUpBtn).append(i.spinDownBtn).appendTo(i.picker)},spinUp:function(){this.adjustTime('p')},spinDown:function(){this.adjustTime('m')},adjustTime:function(i){var j=this;switch(this.activeField){case g.HOUR:var k=parseInt(j.hour.val()),l='p'==i?c:1;k='p'==i?k+1:k-1,('p'==i?k<=l:k>=l)&&j.hour.val(10>k?'0'+k:k).select();break;case g.MIN:var k=parseInt(j.min.val()),l='p'==i?d:0;k='p'==i?k+1:k-1,('p'==i?k<=l:k>=l)&&j.min.val(10>k?'0'+k:k).select();break;case g.AMPM:var k=j.ampm.val();j.ampm.val('AM'==k?'PM':'AM').select();}this.setValue()},setValue:function(){var i=this.ampm.val(),j=this.hour.val(),k=this.min.val();'PM'==i&&(j=parseInt(j)+12);var l=j+':'+k+':00';this.input.attr('value',l)}},g.HOUR=1,g.MIN=2,g.AMPM=3,a.fn.jtimepicker=function(i){return a(this).each(function(){var j=a(this),k=a(this).data('jtimepickerdata'),l=a.extend({},{},j.data(),'object'==typeof i&&i);k||j.data('jtimepickerdata',k=new g(this,l)),'string'==typeof i&&k[i]()})},a.fn.jtimepicker.Constructor=g})(jQuery);